"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={triggerMs:0,trigger:"onChange",valuePropMs:0,valuePropName:"value",uncontroll:!1,getValueFromEvent:function(e){return e},shouldComponentUpdate:void 0},Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e,t){var r=void 0;return function(){for(var o=arguments.length,u=Array(o),n=0;n<o;n++)u[n]=arguments[n];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,u)},t)}},Object.defineProperty(exports,"__esModule",{value:!0});var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),_defineProperty2=require("babel-runtime/helpers/defineProperty"),_defineProperty3=_interopRequireDefault(_defineProperty2),_getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of"),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn"),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=require("babel-runtime/helpers/inherits"),_inherits3=_interopRequireDefault(_inherits2),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),_extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_react=require("react"),_react2=_interopRequireDefault(_react),_debounce=require("./debounce"),_debounce2=_interopRequireDefault(_debounce),_shouldUpdate=require("./should-update"),_shouldUpdate2=_interopRequireDefault(_shouldUpdate),_config=require("./config"),_config2=_interopRequireDefault(_config);exports.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_config2.default,t=(0,_extends3.default)({},_config2.default,{getValueFromEvent:function(e){return e&&e.target?e.target[t.valuePropName]:e}});return"number"==typeof e&&(t=(0,_extends3.default)({},t,{triggerMs:e}),"boolean"==typeof(arguments.length<=2?void 0:arguments[2])&&(t=(0,_extends3.default)({},t,{uncontroll:arguments.length<=2?void 0:arguments[2]})),"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=(0,_extends3.default)({},t,{valuePropMs:arguments.length<=1?void 0:arguments[1]}))),"object"!==(void 0===e?"undefined":(0,_typeof3.default)(e))||Array.isArray(e)||(t=(0,_extends3.default)({},t,e)),function(e){var r=function(r){function o(r){(0,_classCallCheck3.default)(this,o);var u=(0,_possibleConstructorReturn3.default)(this,(o.__proto__||(0,_getPrototypeOf2.default)(o)).call(this,r));return u.onChange=function(){var e=u.props[t.trigger];return t.triggerMs>=0&&(e=(0,_debounce2.default)(function(e){u.props[t.trigger](e)},t.triggerMs)),e}(),u.handleOnChange=function(e){var r=t.getValueFromEvent(e);t.uncontroll||u.setState((0,_defineProperty3.default)({},t.valuePropName,r)),u.lastValue=r,u.onChange(r),e&&e.target&&(t.uncontroll=!1)},u.valueUpdateDebounce=t.valuePropMs>=0?(0,_debounce2.default)(function(e){u.lastValue=e,u.setState((0,_defineProperty3.default)({},t.valuePropName,e))},t.valuePropMs):function(e){u.lastValue=e,u.setState((0,_defineProperty3.default)({},t.valuePropName,e))},u.isMount=!1,u.lastValue="",u.shouldUpdatePropsList=function(){var o=(0,_keys2.default)(e.propTypes||{});return 0===o.length&&(o=(0,_keys2.default)(r||{})),o.filter(function(e){return e!==t.valuePropName}).filter(function(e){return e!==t.trigger}).filter(function(e){return!e.match(/^data-/)}).filter(function(e){return"function"!=typeof r[e]})}(),u.state={},Object.prototype.hasOwnProperty.call(r,t.valuePropName)&&(u.state[t.valuePropName]=r[t.valuePropName],u.lastValue=r[t.valuePropName]),u}return(0,_inherits3.default)(o,r),(0,_createClass3.default)(o,[{key:"componentDidMount",value:function(){this.isMount=!0;var e=this;t.uncontroll&&e.setState((0,_defineProperty3.default)({},t.valuePropName,void 0))}},{key:"componentWillReceiveProps",value:function(e){(0,_shouldUpdate2.default)([t.valuePropName],this.props,e)&&this.lastValue!==e[t.valuePropName]&&this.valueUpdateDebounce(e[t.valuePropName])}},{key:"shouldComponentUpdate",value:function(e,r){return t.shouldComponentUpdate?t.shouldComponentUpdate.call({state:this.state,props:this.props},e,r):this.state!==r||!!(0,_shouldUpdate2.default)(this.shouldUpdatePropsList,this.props,e)}},{key:"componentDidUpdate",value:function(){var e=this;t.uncontroll&&void 0!==this.state[t.valuePropName]&&e.setState((0,_defineProperty3.default)({},t.valuePropName,void 0))}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var r=(0,_extends3.default)({},this.props,this.state);return t.uncontroll&&void 0===r[t.valuePropName]&&delete r[t.valuePropName],Object.prototype.hasOwnProperty.call(r,t.trigger)&&(r[t.trigger]=this.handleOnChange),_react2.default.createElement(e,r)}}]),o}(_react2.default.Component);return r.defaultProps=e.defaultProps,r.propTypes=e.propTypes,r.displayName="ReactFormFieldDebounce("+e.name+")",r}},Object.defineProperty(exports,"__esModule",{value:!0});var _typeof3=_interopRequireDefault(_typeof2=require("babel-runtime/helpers/typeof")),_extends3=_interopRequireDefault(_extends2=require("babel-runtime/helpers/extends"));exports.default=function(e,t){var r=(0,_extends3.default)({},e,{getValueFromEvent:function(e){return e&&e.target?e.target[r.valuePropName]:e}});return"number"==typeof t&&(r=(0,_extends3.default)({},r,{triggerMs:t}),"boolean"==typeof(arguments.length<=3?void 0:arguments[3])&&(r=(0,_extends3.default)({},r,{uncontroll:arguments.length<=3?void 0:arguments[3]})),"number"==typeof(arguments.length<=2?void 0:arguments[2])&&(r=(0,_extends3.default)({},r,{valuePropMs:arguments.length<=2?void 0:arguments[2]}))),"object"!==(void 0===t?"undefined":(0,_typeof3.default)(t))||Array.isArray(t)||(r=(0,_extends3.default)({},r,t)),r},Object.defineProperty(exports,"__esModule",{value:!0});var _typeof3=_interopRequireDefault(_typeof2=require("babel-runtime/helpers/typeof"));exports.default=function(e,t,r){return!(!Array.isArray(e)||0===e.length)&&("object"===(void 0===t?"undefined":(0,_typeof3.default)(t))&&"object"===(void 0===r?"undefined":(0,_typeof3.default)(r))&&e.some(function(e){return t[e]!==r[e]}))};
//# sourceMappingURL=react-component-debounce.min.js.map
